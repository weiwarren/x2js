function X2JS(v){var q="1.1.5";v=v||{};h();r();function h(){if(v.escapeMode===undefined){v.escapeMode=true}v.attributePrefix=v.attributePrefix||"_";v.arrayAccessForm=v.arrayAccessForm||"none";v.emptyNodeForm=v.emptyNodeForm||"text";if(v.enableToStringFunc===undefined){v.enableToStringFunc=true}v.arrayAccessFormPaths=v.arrayAccessFormPaths||[];if(v.skipEmptyTextNodesForObj===undefined){v.skipEmptyTextNodesForObj=true}if(v.stripWhitespaces===undefined){v.stripWhitespaces=true}v.datetimeAccessFormPaths=v.datetimeAccessFormPaths||[]}var g={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function r(){function x(z){var y=String(z);if(y.length===1){y="0"+y}return y}if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}}if(typeof Date.prototype.toISOString!=="function"){Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+x(this.getUTCMonth()+1)+"-"+x(this.getUTCDate())+"T"+x(this.getUTCHours())+":"+x(this.getUTCMinutes())+":"+x(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+"Z"}}}function t(x){var y=x.localName;if(y==null){y=x.baseName}if(y==null||y==""){y=x.nodeName}return y}function o(x){return x.prefix}function p(x){if(typeof(x)=="string"){return x.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}else{return x}}function j(x){return x.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function l(B,y,A){switch(v.arrayAccessForm){case"property":if(!(B[y] instanceof Array)){B[y+"_asArray"]=[B[y]]}else{B[y+"_asArray"]=B[y]}break}if(!(B[y] instanceof Array)&&v.arrayAccessFormPaths.length>0){var x=0;for(;x<v.arrayAccessFormPaths.length;x++){var z=v.arrayAccessFormPaths[x];if(typeof z==="string"){if(z==A){break}}else{if(z instanceof RegExp){if(z.test(A)){break}}else{if(typeof z==="function"){if(z(B,y,A)){break}}}}}if(x!=v.arrayAccessFormPaths.length){B[y]=[B[y]]}}}function a(C){var A=C.split(/[-T:+Z]/g);var B=new Date(A[0],A[1]-1,A[2]);var z=A[5].split(".");B.setHours(A[3],A[4],z[0]);if(z.length>1){B.setMilliseconds(z[1])}if(A[6]&&A[7]){var y=A[6]*60+Number(A[7]);var x=/\d\d-\d\d:\d\d$/.test(C)?"-":"+";y=0+(x=="-"?-1*y:y);B.setMinutes(B.getMinutes()-y-B.getTimezoneOffset())}else{if(C.indexOf("Z",C.length-1)!==-1){B=new Date(Date.UTC(B.getFullYear(),B.getMonth(),B.getDate(),B.getHours(),B.getMinutes(),B.getSeconds(),B.getMilliseconds()))}}return B}function n(A,y,z){if(v.datetimeAccessFormPaths.length>0){var B=z.split(".#")[0];var x=0;for(;x<v.datetimeAccessFormPaths.length;x++){var C=v.datetimeAccessFormPaths[x];if(typeof C==="string"){if(C==B){break}}else{if(C instanceof RegExp){if(C.test(B)){break}}else{if(typeof C==="function"){if(C(obj,y,B)){break}}}}}if(x!=v.datetimeAccessFormPaths.length){return a(A)}else{return A}}else{return A}}function w(z,F){if(z.nodeType==g.DOCUMENT_NODE){var G=new Object;var x=z.childNodes;for(var H=0;H<x.length;H++){var y=x.item(H);if(y.nodeType==g.ELEMENT_NODE){var E=t(y);G[E]=w(y,E)}}return G}else{if(z.nodeType==g.ELEMENT_NODE){var G=new Object;G.__cnt=0;var x=z.childNodes;for(var H=0;H<x.length;H++){var y=x.item(H);var E=t(y);if(y.nodeType!=g.COMMENT_NODE){G.__cnt++;if(G[E]==null){var C=w(y,F+"."+E);if(C.type=="text"){G[E]=w(y,F+"."+E)}else{G[E]=[w(y,F+"."+E)]}l(G,E,F+"."+E)}else{if(G[E]!=null){if(!(G[E] instanceof Array)){G[E]=[G[E]];l(G,E,F+"."+E)}}(G[E])[G[E].length]=w(y,F+"."+E)}}}for(var A=0;A<z.attributes.length;A++){var B=z.attributes.item(A);G.__cnt++;G[B.name]={val:B.value,type:"attribute",attr:z.attributes.item(A)}}var D=o(z);if(D!=null&&D!=""){G.__cnt++;G.__prefix=D}if(G["#text"]!=null){G.__text=G["#text"];if(G.__text instanceof Array){G.__text=G.__text.join("\n")}if(v.escapeMode){G.__text=j(G.__text)}if(v.stripWhitespaces){G.__text=G.__text.trim()}delete G["#text"];if(v.arrayAccessForm=="property"){delete G["#text_asArray"]}G.__text=n(G.__text,E,F+"."+E)}if(G["#cdata-section"]!=null){G.__cdata=G["#cdata-section"];delete G["#cdata-section"];if(v.arrayAccessForm=="property"){delete G["#cdata-section_asArray"]}}if(G.__cnt==1&&G.__text!=null){G={val:G.__text,type:"text",node:z}}else{if(G.__cnt==0&&v.emptyNodeForm=="text"){G=""}else{if(G.__cnt>1&&G.__text!=null&&v.skipEmptyTextNodesForObj){if((v.stripWhitespaces&&G.__text=="")||(G.__text.trim()=="")){delete G.__text}}}}delete G.__cnt;if(v.enableToStringFunc&&(G.__text!=null||G.__cdata!=null)){G.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}}return G}else{if(z.nodeType==g.TEXT_NODE||z.nodeType==g.CDATA_SECTION_NODE){return z.nodeValue}}}}function m(E,B,D,y){var A="<"+((E!=null&&E.__prefix!=null)?(E.__prefix+":"):"")+B;if(D!=null){for(var C=0;C<D.length;C++){var z=D[C];var x=E[z];if(v.escapeMode){x=p(x)}A+=" "+z.substr(v.attributePrefix.length)+"='"+x+"'"}}if(!y){A+=">"}else{A+="/>"}return A}function i(y,x){return"</"+(y.__prefix!=null?(y.__prefix+":"):"")+x+">"}function s(y,x){return y.indexOf(x,y.length-x.length)!==-1}function u(y,x){if((v.arrayAccessForm=="property"&&s(x.toString(),("_asArray")))||x.toString().indexOf(v.attributePrefix)==0||x.toString().indexOf("__")==0||(y[x] instanceof Function)){return true}else{return false}}function k(z){var y=0;if(z instanceof Object){for(var x in z){if(u(z,x)){continue}y++}}return y}function b(z){var y=[];if(z instanceof Object){for(var x in z){if(x.toString().indexOf("__")==-1&&x.toString().indexOf(v.attributePrefix)==0){y.push(x)}}}return y}function f(y){var x="";if(y.__cdata!=null){x+="<![CDATA["+y.__cdata+"]]>"}if(y.__text!=null){if(v.escapeMode){x+=p(y.__text)}else{x+=y.__text}}return x}function c(y){var x="";if(y instanceof Object){x+=f(y)}else{if(y!=null){if(v.escapeMode){x+=p(y)}else{x+=y}}}return x}function e(z,B,A){var x="";if(z.length==0){x+=m(z,B,A,true)}else{for(var y=0;y<z.length;y++){x+=m(z[y],B,b(z[y]),false);x+=d(z[y]);x+=i(z[y],B)}}return x}function d(D){var x="";var B=k(D);if(B>0){for(var A in D){if(u(D,A)){continue}var z=D[A];var C=b(z);if(z==null||z==undefined){x+=m(z,A,C,true)}else{if(z instanceof Object){if(z instanceof Array){x+=e(z,A,C)}else{if(z instanceof Date){x+=m(z,A,C,false);x+=z.toISOString();x+=i(z,A)}else{var y=k(z);if(y>0||z.__text!=null||z.__cdata!=null){x+=m(z,A,C,false);x+=d(z);x+=i(z,A)}else{x+=m(z,A,C,true)}}}}else{x+=m(z,A,C,false);x+=c(z);x+=i(z,A)}}}}x+=c(D);return x}this.parseXmlString=function(z){var B=window.ActiveXObject||"ActiveXObject" in window;if(z===undefined){return null}var A;if(window.DOMParser){var C=new window.DOMParser();var x=null;if(!B){try{x=C.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch(y){x=null}}try{A=C.parseFromString(z,"text/xml");if(x!=null&&A.getElementsByTagNameNS(x,"parsererror").length>0){A=null}}catch(y){A=null}}else{if(z.indexOf("<?")==0){z=z.substr(z.indexOf("?>")+2)}A=new ActiveXObject("Microsoft.XMLDOM");A.async="false";A.loadXML(z)}return A};this.asArray=function(x){if(x instanceof Array){return x}else{return[x]}};this.toXmlDateTime=function(x){if(x instanceof Date){return x.toISOString()}else{if(typeof(x)==="number"){return new Date(x).toISOString()}else{return null}}};this.asDateTime=function(x){if(typeof(x)=="string"){return a(x)}else{return x}};this.xml2json=function(x){return w(x)};this.xml_str2json=function(x){var y=this.parseXmlString(x);if(y!=null){return this.xml2json(y)}else{return null}};this.json2xml_str=function(x){return d(x)};this.json2xml=function(y){var x=this.json2xml_str(y);return this.parseXmlString(x)};this.getVersion=function(){return q}};